!function(e){"use strict";const t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n=[996825010,642813549,513874426,1027748829,705979059],r="bech32",o="bech32m";function s(e){switch(e){case r:return 1;case o:return 734539939;default:throw new Error(`Unrecognized encoding: ${e}`)}}function i(e){let t=1;for(let r=0;r<e.length;++r){const o=t>>25;t=(33554431&t)<<5^e[r];for(let e=0;e<5;++e)(o>>e&1)>0&&(t^=n[e])}return t}function c(e){const t=[];let n;for(n=0;n<e.length;++n)t.push(e.charCodeAt(n)>>5);for(t.push(0),n=0;n<e.length;++n)t.push(31&e.charCodeAt(n));return t}function u(e,t,n,r=!0){const o=[];let s=0,i=0;const c=(1<<n)-1,u=(1<<t+n-1)-1;for(const r of e){if(r<0||r>>t>0)return[];for(s=(s<<t|r)&u,i+=t;i>=n;)i-=n,o.push(s>>i&c)}if(r)i>0&&o.push(s<<n-i&c);else if(i>=t||(s<<n-i&c)>0)return[];return o}function a(e,n,r){const o=n.concat(function(e,t,n){const r=i(c(e).concat(t).concat([0,0,0,0,0,0]))^s(n),o=[];for(let e=0;e<6;++e)o.push(r>>5*(5-e)&31);return o}(e,n,r));let u=e+"1";for(let e=0;e<o.length;++e)u+=t.charAt(o[e]);return u}function l(e,n){const r=n>0?"bech32m":"bech32";if(!function(e){let t,n,r=!1,o=!1;for(t=0;t<e.length;++t){if(n=e.charCodeAt(t),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(o=!0)}return!(r&&o)}(e))return{hrp:null,data:[255]};if(!function(e){const t=e.lastIndexOf("1");return!(t<1||t+7>e.length||e.length>90)}(e=e.toLowerCase()))return{hrp:null,data:[255]};const o=[],u=e.lastIndexOf("1"),a=e.substring(0,u);for(let n=u+1;n<e.length;++n){const r=t.indexOf(e.charAt(n));if(-1===r)return{hrp:null,data:[255]};o.push(r)}return function(e,t,n){return i(c(e).concat(t))===s(n)}(a,o,r)?{hrp:a,data:o.slice(0,o.length-6)}:{hrp:null,data:[255]}}function f(e,t=0){const n=e.split("1",1)[0],{hrp:r,data:o}=l(e,t),s=u(o.slice(1),5,8,!1),i=s.length;switch(!0){case n!==r:throw new Error("Returned hrp string is invalid.");case null===s||i<2||i>40:throw new Error("Decoded string is invalid or out of spec.");case o[0]>16:throw new Error("Returned version bit is out of range.");case 0===o[0]&&20!==i&&32!==i:throw new Error("Decoded string does not match version 0 spec.");case 0===o[0]&&0!==t:case 0!==o[0]&&1!==t:throw new Error("Decoded version bit does not match.");default:return Uint8Array.from(s)}}const h={encode:function(e,t="bch",n=0){const r=a(t,[n,...u([...e],8,5)],n>0?"bech32m":"bech32");return f(r,n),r},decode:f};var g=h;const p=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},{name:"base64",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{name:"base64url",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}];function d(e){for(const t of p)if(t.name===e)return t.charset;throw TypeError("Charset does not exist: "+e)}var w={encode:function(e,t,n=!1){const r=d(t),o=r.length,s=[];let i,c,u,a="",l=0;for(i=0;i<e.length;i++)for(l=0,c=e[i],a+=c>0||(a.length^i)>0?"":"1";l in s||c>0;)u=s[l],u=u>0?256*u+c:c,c=u/o|0,s[l]=u%o,l++;for(;l-- >0;)a+=r[s[l]];return n&&a.length%4>0?a+"=".repeat(4-a.length%4):a},decode:function(e,t){const n=d(t),r=n.length,o=[],s=[];e=e.replace("=","");let i,c,u,a=0;for(i=0;i<e.length;i++){if(a=0,c=n.indexOf(e[i]),c<0)throw new Error(`Character range out of bounds: ${c}`);for(i=c>0||(s.length^i)>0?i:s.push(0);a in o||c>0;)u=o[a],u=u>0?u*r+c:c,c=u>>8,o[a]=u%256,a++}for(;a-- >0;)s.push(o[a]);return Uint8Array.from(s)}};class b extends Uint8Array{constructor(e,t=null,n="be"){if(null!==t){const n=new Uint8Array(t).fill(0);n.set(new Uint8Array(e)),e=n.buffer}return super(e="le"===n?new Uint8Array(e).reverse():e),this}toNum(e="le"){return A("le"===e?this.reverse():this)}toBig(e="le"){return x("le"===e?this.reverse():this)}toArr(){return Array.from(this)}toStr(){return m(this)}toHex(){return function(e){const t=[];let n;for(n=0;n<e.length;n++)t.push(e[n].toString(16).padStart(2,"0"));return t.join("")}(this)}toJson(){return JSON.parse(m(this))}toBytes(){return new Uint8Array(this)}toBech32(e,t){return g.encode(this,e,t)}toBase58(){return w.encode(this,"base58")}toBase64(e){return w.encode(this,"base64",e)}toB64url(){return w.encode(this,"base64url")}prepend(e){return b.of(...e,...this)}append(e){return b.of(...this,...e)}slice(e,t){return new b(new Uint8Array(this).slice(e,t))}reverse(){return new b(new Uint8Array(this).reverse())}write(e,t){this.set(e,t)}addVarint(e=this.length){return b.of(...b.getVarint(e),...this)}static from(e){return new b(Uint8Array.from(e))}static of(...e){return new b(Uint8Array.of(...e))}static join(e){let t,n=0;const r=e.reduce(((e,t)=>e+t.length),0),o=new Uint8Array(r);for(const r of e)for(t=0;t<r.length;n++,t++)o[n]=r[t];return new b(o,r)}static getVarint(e){if(e<253)return b.num(e,1);if(e<65536)return b.of(253,...b.num(e,2));if(e<4294967296)return b.of(254,...b.num(e,4));if(e<0x10000000000000000)return b.of(255,...b.num(e,8));throw new Error(`Value is too large: ${e}`)}}function y(e){return(new TextEncoder).encode(e).buffer}function m(e){return(new TextDecoder).decode(e)}function A(e){let t,n=0;for(t=e.length-1;t>=0;t--)n=256*n+e[t];return Number(n)}function x(e){let t,n=0n;for(t=e.length-1;t>=0;t--)n=256n*n+BigInt(e[t]);return BigInt(n)}b.num=(e,t,n="le")=>new b(function(e){const t=[];for(;e>0;){const n=255&e;t.push(n),e=(e-n)/256}return Uint8Array.from(t)}(e),t,n),b.big=(e,t,n="le")=>new b(function(e){const t=[];for(;e>0n;){const n=0xffn&e;t.push(Number(n)),e=(e-n)/256n}return Uint8Array.from(t)}(e),t,n),b.buff=(e,t)=>new b(e,t),b.str=(e,t)=>new b(y(e),t),b.hex=(e,t)=>new b(function(e){const t=[];let n,r=0;if(e.length%2>0)throw new Error(`Invalid hex string length: ${e.length}`);for(n=0;n<e.length;n+=2)t[r]=parseInt(e.slice(n,n+2),16),r+=1;return Uint8Array.from(t).buffer}(e),t),b.json=e=>new b(y(JSON.stringify(e))),b.bech32=(e,t)=>new b(g.decode(e,t)),b.base58=e=>new b(w.decode(e,"base58")),b.base64=e=>new b(w.decode(e,"base64")),b.b64url=e=>new b(w.decode(e,"base64url"));const v={null:e=>null===e,undefined:e=>void 0===e,hex:e=>function(e){switch(!0){case"string"!=typeof e:case/[^0-9a-fA-F]/.test(e):case e.length%2!=0:return!1;default:return!0}}(e),string:e=>"string"==typeof e,infinity:e=>e===1/0,bigint:e=>"bigint"==typeof e,number:e=>"number"==typeof e,class:e=>"object"==typeof e?.prototype&&e.toString().startsWith("class"),function:e=>"function"==typeof e,uint8:e=>e instanceof Uint8Array,uint16:e=>e instanceof Uint16Array,uint32:e=>e instanceof Uint32Array,buffer:e=>e instanceof ArrayBuffer,array:e=>Array.isArray(e),object:e=>"object"==typeof e};var U={of:e=>{for(const[t,n]of Object.entries(v))if(!0===n(e))return t;return"unknown"},array:{isString:e=>e.every((e=>v.string(e))),isNumber:e=>e.every((e=>v.number(e))),isBigint:e=>e.every((e=>v.bigint(e)))},is:v};const C=/[\p{Lu}]/u,E=/[\p{Ll}]/u,j=/^[\p{Lu}](?![\p{Lu}])/gu,B=/([\p{Alpha}\p{N}_]|$)/u,I=/[_.\- ]+/,N=new RegExp("^"+I.source),S=new RegExp(I.source+B.source,"gu"),q=new RegExp("\\d+"+B.source,"gu");function L(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const n=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),r=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);if(1===e.length)return I.test(e)?"":t.pascalCase?r(e):n(e);return e!==n(e)&&(e=((e,t,n)=>{let r=!1,o=!1,s=!1;for(let i=0;i<e.length;i++){const c=e[i];r&&C.test(c)?(e=e.slice(0,i)+"-"+e.slice(i),r=!1,s=o,o=!0,i++):o&&s&&E.test(c)?(e=e.slice(0,i-1)+"-"+e.slice(i-1),s=o,o=!1,r=!0):(r=t(c)===c&&n(c)!==c,s=o,o=n(c)===c&&t(c)!==c)}return e})(e,n,r)),e=e.replace(N,""),e=t.preserveConsecutiveUppercase?((e,t)=>(j.lastIndex=0,e.replace(j,(e=>t(e)))))(e,n):n(e),t.pascalCase&&(e=r(e.charAt(0))+e.slice(1)),((e,t)=>(S.lastIndex=0,q.lastIndex=0,e.replace(S,((e,n)=>t(n))).replace(q,(e=>t(e)))))(e,r)}var O="@cmdcode/bytes-utils";const T="../src/index.js";let $;async function R(e){$=e;const t=L(String("/"+O).split("/").at(-1)),n=await async function(e){if("undefined"!=typeof window)return window[e];const t=process?.argv&&process.argv.length>2?process.argv.slice(2,3):T;if(String(t).includes("main"))throw new Error("Unable to run tests on a commonJs module!");return console.log(`Testing package: ${t}`),import("../"+t).then((e=>e.default?e.default:e))}(t);k(n)}async function k(e,t=[]){for(const[n,r]of Object.entries(e))if(U.is.class(r)){const e=[...t,n];D(r,e),k(r,e),console.log("Registering tests for class:",n)}else if(U.is.function(r))H(n,r,t);else if(U.is.object(r)){k(r,[...t,n])}}async function D(e,t){const n=[...t,"new"];for(const t of Object.getOwnPropertyNames(e.prototype))H(t,e,n)}async function H(e,t,n){const r=`./api/${n.join("/").toLowerCase()}/${e}.test.js`;import(r).then((e=>{for(const n of Object.keys(e))$.test(r.split("/").at(-1),(r=>{console.log(`Running ${n} tests:\n`),e[n](r,t)}))})).catch((e=>{e.message.includes("Cannot find module")||console.log(`Failed to import test for: ${r}\n${e}`)}))}function J(e){const t=function(e=2164260863){return Math.floor(Math.random()*e)}(),n=BigInt(t),r=t.toString(16),o=b.num(t).toNum(),s=b.num(t).toBig(),i=b.big(n).toBig(),c=b.big(n).toNum(),u=b.hex(r).toHex(),a=b.hex(r).toNum(),l=b.hex(r).toBig(),f=b.num(t).toHex(),h=b.big(n).toHex();e.plan(9),e.equal(o,t,"num => num"),e.equal(s,n,"num => big"),e.equal(f,r,"num => hex"),e.equal(i,n,"big => big"),e.equal(c,t,"big => num"),e.equal(h,r,"big => hex"),e.equal(u,r,"hex => hex"),e.equal(a,t,"hex => num"),e.equal(l,n,"hex => big")}e("Bytes-utils Test Suite",(async e=>{e.test("API Tests",(async e=>{await R(e)})),e.test("Integrity Tests",(e=>{J(e)}))}))}(tape);
